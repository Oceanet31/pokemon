@startuml

package com{
  package esiea{
    package pootp{
    
      package attacks{
      
        class Attack{
          - String name
          - ElementType type
          - int nbUse
          - int power
          - double failProbability
          
          + Attack(String, ElementType, int, int, double)
          + String getName()
          + ElementType getType()
          + int getNbUse()
          + void setNbUse(int)
          + int getPower()
          + double getFailProbability()
          + void attackUsed()
          + double getAccuracy()
        }
        
      }
      
      package dataBase{
        
        class AttackDataBase{
          - ArrayList<Attack> attacks
          
          + ArrayList<Attack> getAttack()
          + loadAttacksFromFile(File)
          
        }
        
        
        class ItemDataBase{
          - ArrayList<Item> items
          
          + ArrayList<Item> getItems()
          + loadItemsFromFile(File)
        }
        
        class MonsterDataBase{
          - ArrayList<Monster> monsters
          
          - int randomStat(int, int)
          + ArrayList<Monster> getMonsters()
          + loadMonsterFromFile(File)
        }
      }
      
      package game{
        class ActionChoice{
          - int type;
          - Attack attack
          - Item item
          - int switchIndex
        }
        
        class GameEngine{
          - Player player
          - player enemy
          - boolean isWildBattle
          - GameWindow window
          - Runnable onVictory
          
          + GameEngine(Player, Player, boolean, GameWindow)
          + void setOnVictory()
          + void startBattle()
          + void onPlayerAttack(Attack)
          + void onPlayerUseItem(Item)
          + void onPlayerSwitch(int)
          - void processTurn(ActionChoice)
          - void executeAction(Player, ActionChoice, Monster, Monster, Runnable)
          - void checkBattleEndAndContinue(Runnable)
          - void handleKOSwitch(Player, Runnable)
          - void tryCapture(Monster, Runnable)
          - void endTurn()
          - ActionChoice AIChoice()
          - boolean isBattleOver()
          + void updateGraphics()
        }
        
        class Player{
          - String name
          - ArrayList<Monster> team
          - HashMap<Item, Integer> inventory
          
          + Player(String)
          + String getName()
          + ArrayList<Monster> getTeam()
          + HashMap<Item,Integer> getInventory()
          + void addMonsterToTeam(Monster Monster)
          + void addItemToInventory(Item item)
          + void useItem(Item, Monster)
          + boolean hasLost()
          + Monster getActiveMonster()
        }
      }
      
      package monsters{
        class BugMonster{
          - int attackCount
          
          + BugMonster(String, int, int, double, int)
          + void attack(Monster, Attack)
          + void getAttacked(Monster, Attack)
        }
        
        class EarthMonster{
          - double fleeingchance
          - int fleeingDuration
          
          + EarthMonster(String, int, int, double, int)
          + double getFleeingChance()
          + void attack(Monster, Attack)
          + void getAttacked(Monster, Attack)
          + boolean isProtected()
        }
        
        class FireMonster{
          - double burningChance
          
          + FireMonster(String, int, int, double, int, double)
          + double getBurningChance()
          + void attack(Monster, Attack)
          + void getAttacked(Monster, Attack)
        }
        
        class LightningMonster{
          - double paralizedChance
          - int paralizedDuration
          
          + LightningMonster(String, int, int, double, int, double)
          + doule getParalizedChance()
          + void attack(Monster, Attack)
          + getAttacked(Monster, Attack)
        }
        
        abstract class Monster{
          - ElementType element
          - String name
          - int hp
          - ArrayList<Attack> attacks
          - int defense
          - double attack
          - int speed
          - State state
          - int round
          - int effectDuration
          - int startingHp
          - String evolutionName
          - int level
          - int xp
          - int xpToNextLevel
          
          + Monster(String, ElementType, int, int, double, int)
          + ElementType getElement()
          + State getState()
          + void setState(State)
          + double ArrayList<Attack> getAttacks()
          + int getEffectDuration()
          + void setEffectDuraion(int)
          + void healFullHp()
          + int getDefense()
          + String getName()
          + int getSpeed()
          + double getAttack()
          + int getLevel()
          + int getXp()
          + int getXpToNextLevel()
          + void setAttack(double)
          + void setSpeed(int)
          + void setDefense(int)
          + int getHp()
          + void setHP(int)
          + int getStartingHp()
          + void setEvolutionName(String)
          + String getEvolutionName()
          + double damages(Monster)
          + double damages(Monster, Attack)
          + void takeDamages(double)
          + void applyStateEffects()
          + void gainXp(int)
          - void levelUp()
          + void assignAttacks()
          + void learnNewAttack()
          - void increasedStat(double)
          + {abstract} void getAttacked(Monster)
          + {abstract} void attack(Monster)
          
        }
        
        abstract class NatureMonster{
          + NatureMonster(String, int, int, double, int)
          + void recoverHealth(Monster monster)
        }
        
        
        class PlantMonster{
          + PlantMonster(String, int, int, double, int)
          + void attack(Monster, Attack)
          + void getAttacked(Monster, Attack)
        }
        
        class WaterMonster{
          - double floodChance
          - double fallChance
          - int floodDuration
          
          + WaterMonster(String, int, int, double, int, double, double)
          + double getFloodChance()
          + double getFallChance()
          + void attack(Monster, Attack)
          + void getAttacked(Monster, Attack)
          + boolean isTerrainFlooded()
        }
        
        enum ElementType{
          EARTH
          LIGHTNING
          WATER
          FIRE
          NATURE
          NORMAL
        }
        
        enum State{
          NORMAL
          PARALIZED
          POISONED
          BURNED
          FELL
          DEAD
        }
      }
      
      package objects{
        
        abstract class Item{
          + {abstract} void use(Monster)
          + {abstract} String getName()
          + boolean equals(Item)
        }
        
        class Medicament{
          - String name
          - State curedState
          
          + Medicament(String, State)
          + String getName()
          + void use(Monster)
        }
        
        class Pokeball{
          + String getName()
          + void use()
        }
        
        class Potion{
          - String name
          - int power
          - PotionType type
          
          + Potion(String, int, PotionType)
          + String getName()
          + int getPower()
          + PotionType getType()
          + void use(Monster)
        }
        
        enum PotionType{
          HEAL
          REVIVE
          CURE
          BOOST_ATTACK
          BOOST_DEFENSE
          BOOST_SPEED
        }
      }
      
      class PokemonApp{
        - {static} MonsterDataBase monsterDB
        + {static} AttackDataBase attackDB
        - {static} ItemDataBase itemDB
        
        + {static} void main(String[])
        + {static} void startNextBattle(Player, GameWindow, int)
        + {static} Monster createRandomMonster()
        + {static} void assignRandomAttacks(Monster)
        + {static} Monster cloneMonster(Monster)
      }
    }
  }
}




Monster <|-- FireMonster
Monster <|-- EarthMonster
Monster <|-- LightningMonster
Monster <|-- WaterMonster
Monster <|-- NatureMonster

NatureMonster <|-- PlantMonster
NatureMonster <|-- BugMonster

Item 	<|-- Medicament
Item 	<|-- Pokeball
Item 	<|-- Potion



Attack <-- ElementType

AttackDataBase <-- ElementType
AttackDataBase "0..1" <-- "0..*" Attack

ItemDataBase "0..1" <-- "0..*" Item

MonsterDataBase "0..1" <-- "0..*" Monster


ActionChoice <-- Attack
ActionChoice <-- Item

Player "1" <-- "1..4" Monster
Player "1" <-- "0..*" Item


Monster <-- ElementType
Monster <-- "4" Attack

Medicament <-- State
Potion <-- PotionType

PokemonApp <-- MonsterDataBase
PokemonApp <-- AttackDataBase
PokemonApp <-- ItemDataBase

@enduml